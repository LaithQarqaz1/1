<!DOCTYPE html>
<html lang="ar">
<head>
<link rel="icon" href="faveicon.png" type="image/png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„Ø¹Ø¨Ø© Ø§Ù„Ø°Ø§ÙƒØ±Ø©</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: black;
            color: white;
        }

        .game-container {
            text-align: center;
        }

        h1 {
            margin-bottom: 20px;
        }

        .info {
            margin-bottom: 20px;
        }

        .grid {
            display: grid;
            gap: 10px;
            justify-content: center;
            background-color: black;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }

        .grid-4x4 {
            grid-template-columns: repeat(4, 60px); /* ØªØ¹Ø¯ÙŠÙ„ Ø­Ø¬Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
        }

        .grid-6x6 {
            grid-template-columns: repeat(6, 60px); /* ØªØ¹Ø¯ÙŠÙ„ Ø­Ø¬Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
        }

        .card {
            width: 60px; /* ØªØ¹Ø¯ÙŠÙ„ Ø­Ø¬Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
            height: 60px; /* ØªØ¹Ø¯ÙŠÙ„ Ø­Ø¬Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
            background-color: gold;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem; /* ØªØ¹Ø¯ÙŠÙ„ Ø­Ø¬Ù… Ø§Ù„Ù†Øµ */
            color: white;
            border-radius: 10px;
            user-select: none;
            transition: transform 0.6s, background-color 0.6s;
            transform-style: preserve-3d;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }

        .card.flipped, .card.matched {
            background-color: transparent;
            cursor: default;
            transform: rotateY(180deg);
        }

        .card.matched {
            color: green;
            background-color: green;
        }

        .popup {
            display: none;
            position: fixed;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: center;
            border-radius: 10px;
            color: black;
        }

        .popup.active {
            display: block;
        }

        .popup-message {
            font-size: 2rem;
            color: green;
            margin-bottom: 20px;
        }

        .popup-lost-message {
            font-size: 2rem;
            color: red;
            margin-bottom: 20px;
        }

        .popup-lost-reason {
            font-size: 1.5rem;
            color: red;
        }

        #restart-btn, .popup button, #toggle-theme-btn, #toggle-grid-btn {
            margin-top: 20px;
            padding: 15px 30px;
            font-size: 1.2rem;
            background-color: #1e90ff;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #restart-btn:hover, .popup button:hover, #toggle-theme-btn:hover, #toggle-grid-btn:hover {
            background-color: #1c86ee;
        }

        .difficulty-label {
            display: inline-block;
            padding: 10px 20px;
            border: 2px solid #1e90ff;
            border-radius: 10px;
            margin: 5px;
            cursor: pointer;
            text-align: center;
            width: 100px;
        }

        .difficulty-label input[type="radio"] {
            display: none;
        }

        .difficulty-label span {
            margin-left: 8px;
        }

        .difficulty-label input[type="radio"]:checked + span {
            background-color: #1e90ff;
            color: white;
            border-radius: 10px;
            padding: 5px 10px;
        }

        .row {
            display: flex;
            justify-content: center;
        }

        .row:first-child {
            margin-bottom: 10px;
        }

        @keyframes entrance {
            0% {
                transform: rotateY(-180deg);
            }
            100% {
                transform: rotateY(0);
            }
        }

        .entering .card {
            animation: entrance 0.6s ease forwards;
        }

        @media (max-width: 600px) {
            .grid {
                gap: 5px;
                padding: 5px;
            }

            .grid-4x4 {
                grid-template-columns: repeat(4, 40px); /* ØªØ¹Ø¯ÙŠÙ„ Ø­Ø¬Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
            }

            .grid-6x6 {
                grid-template-columns: repeat(6, 40px); /* ØªØ¹Ø¯ÙŠÙ„ Ø­Ø¬Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
            }

            .card {
                width: 40px; /* ØªØ¹Ø¯ÙŠÙ„ Ø­Ø¬Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
                height: 40px; /* ØªØ¹Ø¯ÙŠÙ„ Ø­Ø¬Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
                font-size: 1rem; /* ØªØ¹Ø¯ÙŠÙ„ Ø­Ø¬Ù… Ø§Ù„Ù†Øµ */
            }

            .difficulty-label {
                width: 80px;
                padding: 5px 10px;
            }

            #restart-btn, .popup button, #toggle-theme-btn, #toggle-grid-btn {
                padding: 10px 20px;
                font-size: 1rem;
            }
        }

        body.light-theme {
            background-color: white;
            color: black;
        }

        body.light-theme .grid {
            background-color: white;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }

        body.light-theme .card {
            background-color: #007BFF; /* Ù„ÙˆÙ† Ø£Ø²Ø±Ù‚ Ø¯Ø§ÙƒÙ† */
            color: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        }

        body.light-theme .card.flipped, 
        body.light-theme .card.matched {
            background-color: transparent;
            color: black;
        }

        body.light-theme .card.matched {
            background-color: green; /* Ù„ÙˆÙ† Ø£Ø®Ø¶Ø± Ø¹Ù†Ø¯ Ø§Ù„ØªØ·Ø§Ø¨Ù‚ */
        }

        body.light-theme .info {
            color: black;
        }
    </style>
</head>
<body>

    <div class="game-container">
        <h1>Ù„Ø¹Ø¨Ø© Ø§Ù„Ø°Ø§ÙƒØ±Ø©</h1>
        <div>ØªØ·ÙˆÙŠØ±: Ù„ÙŠØ« Ù‚Ø±Ù‚Ø²</div>
        <div class="info">
            <div id="moves">Ø§Ù„Ø­Ø±ÙƒØ§Øª: 30</div>
            <div id="timer">Ø§Ù„ÙˆÙ‚Øª: 45 Ø«Ø§Ù†ÙŠØ©</div>
            <div id="difficulty-level">
                Ø§Ø®ØªØ± Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹ÙˆØ¨Ø©:
                <div class="row">
                    <label class="difficulty-label"><input type="radio" name="difficulty" value="Ø³Ù‡Ù„"><span>Ø³Ù‡Ù„</span></label>
                    <label class="difficulty-label"><input type="radio" name="difficulty" value="Ù„Ø§ Ù†Ù‡Ø§Ø¦ÙŠ"><span>Ù„Ø§ Ù†Ù‡Ø§Ø¦ÙŠ</span></label>
                </div>
                <div class="row">
                    <label class="difficulty-label"><input type="radio" name="difficulty" value="ØµØ¹Ø¨"><span>ØµØ¹Ø¨</span></label>
                    <label class="difficulty-label"><input type="radio" name="difficulty" value="Ù…ØªÙˆØ³Ø·" checked><span>Ù…ØªÙˆØ³Ø·</span></label>
                </div>
            </div>
        </div>
        <div class="grid grid-6x6" id="grid"></div>
        <div id="message"></div>
        <button id="restart-btn">Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
        <button id="toggle-theme-btn">ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø´ÙƒÙ„</button>
        <button id="toggle-grid-btn">ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø´Ø¨ÙƒØ©</button>
    </div>

    <div class="popup" id="popup-win">
        <div class="popup-message">Ù„Ù‚Ø¯ ÙØ²Øª</div>
        <button onclick="resetGame()">Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
    </div>

    <div class="popup" id="popup-lose">
        <div class="popup-lost-message">Ù„Ù‚Ø¯ Ø®Ø³Ø±Øª</div>
        <div class="popup-lost-reason" id="lose-reason"></div>
        <button onclick="resetGame()">Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
    </div>
    <script>
        const allEmojis = [
            'ğŸ', 'ğŸŒ', 'ğŸ‰', 'ğŸ‹', 'ğŸ‡', 'ğŸ¥­', 'ğŸŠ', 'ğŸ¥¥',
            'ğŸ', 'ğŸ‘', 'ğŸ’', 'ğŸ“', 'ğŸ¥', 'ğŸ…', 'ğŸŒ½', 'ğŸ†',
            'ğŸˆ', 'ğŸ„', 'ğŸ¥‘', 'ğŸ¥•', 'ğŸŒ¶ï¸', 'ğŸ', 'ğŸ', 'ğŸ§',
            'ğŸ°', 'ğŸ«', 'ğŸ¬', 'ğŸ­', 'ğŸ®', 'ğŸµ', 'ğŸª', 'ğŸ©',
            'ğŸ¥œ', 'ğŸ¯', 'ğŸ¥¯', 'ğŸ¿', 'ğŸ¥“', 'ğŸŒ­', 'ğŸ”', 'ğŸŸ',
            'ğŸ•', 'ğŸ–', 'ğŸ—', 'ğŸ¤', 'ğŸ£', 'ğŸ¥', 'ğŸ™', 'ğŸš',
            'ğŸ›', 'ğŸœ', 'ğŸ', 'ğŸ ', 'ğŸ¢', 'ğŸ£', 'ğŸ¦', 'ğŸ§'
        ];

        let gridSize = 6; // ØªØºÙŠÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ø´Ø¨ÙƒØ© Ø¥Ù„Ù‰ 6x6
        let emojis = [];
        let firstCard = null;
        let secondCard = null;
        let lockBoard = false;
        let matches = 0;
        let moves = 0;
        let timer;
        let timeLeft = 100; // ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
        let maxMoves = 75; // ØªØ¹Ø¯ÙŠÙ„ Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
        let difficulty = "Ù…ØªÙˆØ³Ø·"; // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
        let gameStarted = false; // Ø¥Ø¶Ø§ÙØ© Ø¹Ù„Ù… Ù„Ù„ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ Ù…Ø§ Ø¨Ø¯Ø£Øª Ø§Ù„Ù„Ø¹Ø¨Ø©

        const gridElement = document.getElementById('grid');
        const movesElement = document.getElementById('moves');
        const timerElement = document.getElementById('timer');
        const popupWin = document.getElementById('popup-win');
        const popupLose = document.getElementById('popup-lose');
        const loseReason = document.getElementById('lose-reason');
        const restartButton = document.getElementById('restart-btn');
        const themeButton = document.getElementById('toggle-theme-btn');
        const gridButton = document.getElementById('toggle-grid-btn');

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function startGame() {
            emojis = allEmojis.slice();
            shuffle(emojis);
            emojis = emojis.slice(0, (gridSize * gridSize) / 2);
            emojis = [...emojis, ...emojis];
            shuffle(emojis);
            createGrid();
            resetStats();
            gameStarted = false; // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¹Ù„Ù… Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
        }

        function createGrid() {
            gridElement.innerHTML = '';
            gridElement.className = `grid grid-${gridSize}x${gridSize}`;

            emojis.forEach(emoji => {
                const card = document.createElement('div');
                card.classList.add('card');
                card.dataset.emoji = emoji;
                card.addEventListener('click', flipCard);
                gridElement.appendChild(card);
            });
        }

        function flipCard() {
            if (lockBoard || this === firstCard) return;

            if (!gameStarted) {
                startTimer();
                gameStarted = true;
            }

            this.classList.add('flipped');
            this.textContent = this.dataset.emoji;

            if (!firstCard) {
                firstCard = this;
                return;
            }

            secondCard = this;
            lockBoard = true;

            checkForMatch();
        }

        function checkForMatch() {
            let isMatch = firstCard.dataset.emoji === secondCard.dataset.emoji;
            isMatch ? disableCards() : unflipCards();
        }

        function disableCards() {
            firstCard.classList.add('matched');
            secondCard.classList.add('matched');

            resetBoard();
            matches++;

            if (matches === emojis.length / 2) {
                setTimeout(showWinPopup, 1000);
            }
        }

        function unflipCards() {
            setTimeout(() => {
                firstCard.classList.remove('flipped');
                secondCard.classList.remove('flipped');
                firstCard.textContent = '';
                secondCard.textContent = '';
                resetBoard();
            }, 1000);
        }

        function resetBoard() {
            [firstCard, secondCard, lockBoard] = [null, null, false];
            moves++;
            movesElement.textContent = `Ø§Ù„Ø­Ø±ÙƒØ§Øª: ${maxMoves - moves}`;
            if (moves >= maxMoves) {
                setTimeout(() => showLosePopup('Ù„Ù‚Ø¯ Ø§Ø³ØªÙ†ÙØ¯Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø±ÙƒØ§Øª'), 500);
            }
        }

        function resetStats() {
            matches = 0;
            moves = 0;
            clearInterval(timer);

            let settings = getSettingsByDifficulty(difficulty, gridSize);
            timeLeft = settings.time;
            maxMoves = settings.moves;

            movesElement.textContent = `Ø§Ù„Ø­Ø±ÙƒØ§Øª: ${maxMoves}`;
            timerElement.textContent = `Ø§Ù„ÙˆÙ‚Øª: ${timeLeft === Infinity ? 'Ù„Ø§ Ù†Ù‡Ø§Ø¦ÙŠ' : timeLeft + ' Ø«Ø§Ù†ÙŠØ©'}`;
        }

        function startTimer() {
            clearInterval(timer);
            timer = setInterval(() => {
                if (timeLeft > 0 && timeLeft !== Infinity) {
                    timeLeft--;
                    timerElement.textContent = `Ø§Ù„ÙˆÙ‚Øª: ${timeLeft} Ø«Ø§Ù†ÙŠØ©`;
                    if (timeLeft <= 0) {
                        showLosePopup('Ù„Ù‚Ø¯ Ù†ÙØ¯ Ø§Ù„ÙˆÙ‚Øª');
                    }
                }
            }, 1000);
        }

        function getSettingsByDifficulty(difficulty, gridSize) {
            const settings = {
                "4": {
                    "Ø³Ù‡Ù„": { time: 60, moves: 50 },
                    "Ù…ØªÙˆØ³Ø·": { time: 40, moves: 30 },
                    "ØµØ¹Ø¨": { time: 30, moves: 25 },
                    "Ù„Ø§ Ù†Ù‡Ø§Ø¦ÙŠ": { time: Infinity, moves: Infinity }
                },
                "6": {
                    "Ø³Ù‡Ù„": { time: 150, moves: 100 },
                    "Ù…ØªÙˆØ³Ø·": { time: 100, moves: 75 },
                    "ØµØ¹Ø¨": { time: 75, moves: 55 },
                    "Ù„Ø§ Ù†Ù‡Ø§Ø¦ÙŠ": { time: Infinity, moves: Infinity }
                }
            };
            return settings[gridSize][difficulty];
        }

        function showWinPopup() {
            popupWin.classList.add('active');
        }

        function showLosePopup(reason) {
            loseReason.textContent = reason;
            popupLose.classList.add('active');
        }

        function resetGame() {
            popupWin.classList.remove('active');
            popupLose.classList.remove('active');
            startGame();
        }

        restartButton.addEventListener('click', resetGame);

        document.querySelectorAll('input[name="difficulty"]').forEach(input => {
            input.addEventListener('change', function() {
                difficulty = this.value;
                resetGame();
            });
        });

        themeButton.addEventListener('click', () => {
            document.body.classList.toggle('light-theme');
        });

        gridButton.addEventListener('click', () => {
            gridSize = gridSize === 4 ? 6 : 4;
            resetGame();
        });

        startGame();
    </script>
</body>
</html>
